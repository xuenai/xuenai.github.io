<!doctype html>
<html>
<head>
<meta charset='utf-8' />
<title>百叶窗图片</title>
<script src='TweenMax.min.js' ></script>
<style type="text/css">
	*{margin: 0;padding: 0;}
	.box{margin: 100px auto;width:800px;height: 400px;border-radius:6px;overflow:hidden;}
	.box div{height: 20px;background: url(http://a.hiphotos.baidu.com/zhidao/pic/item/2fdda3cc7cd98d10396505fc273fb80e7aec904d.jpg);background-size: cover;}
</style>
</head>
<body>
<div class="box"></div>


<script type="text/javascript">
	var str='';
	var num2=1;
	var imgs=['http://a.hiphotos.baidu.com/zhidao/pic/item/2fdda3cc7cd98d10396505fc273fb80e7aec904d.jpg',
				'http://img5.imgtn.bdimg.com/it/u=1259271826,853501237&fm=23&gp=0.jpg',
				'http://v1.qzone.cc/pic/201510/06/12/58/561354ee526cc420.jpg!600x600.jpg',
				'http://p4.gexing.com/G1/M00/A8/6E/rBACJ1XEnDzC_ETYAAGzPoKl_-M670_600x.jpg',
				'http://img2.imgtn.bdimg.com/it/u=129941157,3952133099&fm=23&gp=0.jpg'];
	var box=document.getElementsByClassName('box')[0];
	for(var i=0;i<20;i++){
		str += '<div></div>';
	}
	box.innerHTML=str;
	var divs=box.getElementsByTagName('div');
	for(var i=0;i<divs.length;i++){
		divs[i].style.backgroundPosition='center -'+i*20+'px';
	}

	var t=new TimelineMax();
	var t2=new TimelineMax();

	change();
	function change(){
		var num=0;
		t.staggerTo('.box div',0.5,{
			rotationX:-90,
			onComplete:function(){
				this.target.style.cssText='background:url('+imgs[num2]+');'+'background-position:center -'+num*20+'px;background-size: cover;transform:rotateX(-90deg);';
				// 'background:url(img/reba'+num2+'.jpg);'
				if(this.target==divs[divs.length-1]){
					num2++;
					if(num2==imgs.length) num2=0;
				}
				num++;
				if(num==9) change2();
			}
		},0.05)
	}
	function change2(){
		t2.staggerTo('.box div',0.5,{
			rotationX:0
		},0.05)
	}
	box.onclick=change;
</script>
</body>
</html>
